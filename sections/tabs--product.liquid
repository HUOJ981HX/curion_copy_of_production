{% assign product_detail_tab = product.metafields.iamota.product_detail_tab %}
{% assign articles_tab = product.metafields.iamota.articles_tab %}
{% assign brochures_tab = product.metafields.iamota.brochures_tab %}
{% assign instructions_tab = product.metafields.iamota.instructions_tab %}
{% assign videos_tab = product.metafields.iamota.videos_tab %}

{% assign counter = 0 %}

{%- capture product_tabs -%}
    <!-- Product Detail Tab - Html content field -->
    {% if product_detail_tab != blank %}
        {%- assign counter = counter | plus: 1 -%}
        <h4 class="css-grid__item css-grid__item--card tab-panel" tabindex="0">
            <button class="tab__title">Product Details
                <div class="tab__icon">
                    {% render 'icon', name: 'minus', class: 'tab__icon--close svg--baseline' %}
                    {% render 'icon', name: 'plus', class: 'tab__icon--open svg--baseline' %}
                </div>
            </button>
        </h4>

        <div class="css-grid__item css-grid__item--panel" id="tab_1">
            <div class='tab-content__wrapper'>
                {{ product_detail_tab }}
            </div>
        </div>
    {% endif %}

    <!-- Articles Tab - Html content field -->
    {% if articles_tab != blank %}
        {%- assign counter = counter | plus: 1 -%} 
        <h4 class="css-grid__item css-grid__item--card tab-panel" tabindex="0">
            <button class="tab__title">How To's
                <div class="tab__icon">
                    {% render 'icon', name: 'minus', class: 'tab__icon--close svg--baseline' %}
                    {% render 'icon', name: 'plus', class: 'tab__icon--open svg--baseline' %}
                </div>
            </button>
        </h4>

        <div class="css-grid__item css-grid__item--panel" id="tab_2">
            <div class='tab-content__wrapper'>
                {{ articles_tab }}
            </div>
        </div>
    {% endif %}

    <!-- Brochures Tab - Html content field -->
    {% if brochures_tab != blank %}
        {%- assign counter = counter | plus: 1 -%} 
        <h4 class="css-grid__item css-grid__item--card tab-panel" tabindex="0">
            <button class="tab__title">Brochures
                <div class="tab__icon">
                    {% render 'icon', name: 'minus', class: 'tab__icon--close svg--baseline' %}
                    {% render 'icon', name: 'plus', class: 'tab__icon--open svg--baseline' %}
                </div>
            </button>
        </h4>

        <div class="css-grid__item css-grid__item--panel" id="tab_3">
            <div class='tab-content__wrapper'>
                {{ brochures_tab }}
            </div>
        </div>
    {% endif %}

    <!-- Instructions Tab - Html content field -->
    {% if instructions_tab != blank %}
        {%- assign counter = counter | plus: 1 -%} 
        <h4 class="css-grid__item css-grid__item--card tab-panel" tabindex="0">
            <button class="tab__title">Instructions/SDS
                <div class="tab__icon">
                    {% render 'icon', name: 'minus', class: 'tab__icon--close svg--baseline' %}
                    {% render 'icon', name: 'plus', class: 'tab__icon--open svg--baseline' %}
                </div>
            </button>
        </h4>

        <div class="css-grid__item css-grid__item--panel" id="tab_4">
            <div class='tab-content__wrapper'>
                {{ instructions_tab }}
            </div>
        </div>
    {% endif %}

    <!-- Articles Tab - Html content field -->
    {% if videos_tab != blank %}
        {%- assign counter = counter | plus: 1 -%} 
        <h4 class="css-grid__item css-grid__item--card tab-panel" tabindex="0">
            <button class="tab__title">Videos
                <div class="tab__icon">
                    {% render 'icon', name: 'minus', class: 'tab__icon--close svg--baseline' %}
                    {% render 'icon', name: 'plus', class: 'tab__icon--open svg--baseline' %}
                </div>
            </button>
        </h4>

        <div class="css-grid__item css-grid__item--panel" id="tab_5">
            <div class='tab-content__wrapper'>
                {{ videos_tab }}
            </div>
        </div>
    {% endif %}
{%- endcapture -%}

{%- assign product_tabs = product_tabs | trim -%}
{%- unless product_tabs == blank -%}
    <div class="container" id=productDetailTabs>
        <div class="tabs">
            <div class="css-grid--large-5 css-grid--medium-5 css-grid--small-1 css-grid--accordion" 
            style="grid-template-columns: repeat({{ counter }},1fr);"
            data-product-tab-content>
                {{ product_tabs }}
            </div>
        </div>
    </div>
{%- endunless -%}

{% schema %}
{
    "name": "Tabs",
    "class": "page-section page-section--gap page-section--full-bleed page-section--tabs"
}
{% endschema %}