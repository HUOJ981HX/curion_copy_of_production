{% render 'breadcrumbs' %}
<div class="product" data-section-id="{{ section.id }}" data-section-type="product" data-enable-history-state="true">
    {%- assign current_variant = product.selected_or_first_available_variant -%}
    {%- assign featured_image = current_variant.featured_image | default: product.featured_image -%}
    {%- assign featured_media = product.selected_or_first_available_variant.featured_media | default: product.featured_media -%}

    <div class="product__images">
        <a class="in-page-link visually-hidden skip-link" href="#ProductContent">{{ 'custom.product.accessibility.skip_to_content' | t }}</a>
        <div class="product__feature-image carousel--featured-product swiper" data-product-featured-image>
            {% render "product-tags" %}
            <div class="swiper-wrapper">
            {% for media in product.media %}
                <div class="swiper-slide" tabindex="-1" data-index="{{ forloop.index0 }}">
                    {% render 'media' with media: media, featured_media: featured_media, height: 530, product_image_scale: 2 %}
                </div>
            {% endfor %}
            </div>
        </div>
        {% if product.media.size > 1 %}
            <div class="carousel--product-thumbnails swiper {% if product.media.size <= 4 %}no-arrows--mobile{% endif %} {% if product.media.size <= 7 %}no-arrows--desktop{% endif %}">
                <div class="swiper-arrow__container swiper-arrow__container--prev">
                    <button type="button" class="swiper-arrow swiper-button-prev-product" tabindex="-1">{% render 'icon', name: 'arrow--left', class: 'svg--baseline' %}<span class="sr-only">Previous</span></button>
                </div>
                <div class="swiper-arrow__container swiper-arrow__container--next">
                    <button type="button" class="swiper-arrow swiper-button-next-product" tabindex="-1">{% render 'icon', name: 'arrow--right', class: 'svg--baseline' %}<span class="sr-only">Next</span></button>
                </div>
                <ul class="swiper-wrapper product__thumbnails">
                    {% for media in product.media %}
                        <li class="swiper-slide product__thumbnail-item product__thumbnails-item--{{ forloop.index }}" tabindex="0" data-index="{{ forloop.index0 }}">
                            <div
                            class="product-single__thumbnail product-single__thumbnail--{{ section.id }}"
                            data-product-single-thumbnail
                            data-thumbnail-id="{{ section.id }}-{{ media.id }}">
                                <img class="product-single__thumbnail-image" src="{{ media.preview_image | img_url: '110x110', scale: 2 }}" alt="{{ media.alt | escape }}">

                                {%- if media.media_type == 'video' or media.media_type =='external_video' -%}
                                    <div class="product-single__thumbnail-badge">
                                        {% render 'icon', name: 'play', class: 'svg--baseline' %}
                                    </div>
                                {%- endif -%}
                                {%- if media.media_type == 'model' -%}
                                    <div class="product-single__thumbnail-badge">
                                        {% comment %}{% include 'icon-3d-badge-full-color' %}{% endcomment %}
                                    </div>
                                {%- endif -%}
                            </div>
                        </li>
                    {% endfor %}
                </ul>
            </div>

        {% endif %}
    </div>
    <div id="ProductContent" class="product__content">

        <h1 class="product__title h3">{{ product.title }}</h1>
        <a href="#looxReviews">
<div class="loox-rating" data-id="{{ product.id }}" data-rating="{{ product.metafields.loox.avg_rating }}" data-raters="{{ product.metafields.loox.num_reviews }}"></div>
</a>
{% comment %}
        <!-- Yotpo Star Reviews -->
        <div class="yotpo-widget-instance" data-yotpo-instance-id="380212" data-yotpo-product-id="{{product.id}}" data-yotpo-cart-product-id="{{item.product.id}}" data-yotpo-section-id="{{template.name}}"></div>
{% endcomment %}
        <div class="product__description">
            {{ product.description }}
        </div>

        <a class='anchor-link anchor-link--product-detail-tabs' href="#productDetailTabs">
            View Videos and Product Details
        </a>

        {% render 'product-form--ajax', product: product, current_variant: current_variant, isAjax: true, circle_swatches: section.settings.circle_swatches, text_swatches: section.settings.text_swatches %}

    </div>

    {% unless product == empty %}
        <script type="application/json" data-product-json data-product-page>
            {{ product | json }}
        </script>
    {% endunless %}
</div>

<div id="productDetailTabs">
    
</div>


{% schema %}
    {
        "name": "Product",
        "class": "page-section page-section--product",
        "settings": [
            {
                "type": "checkbox",
                "id": "show_share_buttons",
                "label": "Show social sharing buttons",
                "default": true
            },
            {
                "type": "textarea",
                "id": "circle_swatches",
                "label": "Color variant types",
                "info": "Add a comma-separated list of variant titles that should have a background color, texture, or pattern. (colour,theme,season)"
            },
            {
                "type": "textarea",
                "id": "text_swatches",
                "label": "Text variant types",
                "info": "Add a comma-separated list of variant titles that should be displayed as a text-based swatch. (size, length)"
            }
        ]
    }
{% endschema %}
