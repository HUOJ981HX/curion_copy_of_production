<div class='container'>
    <section class="featured-products-slider">
        <div class='page-section__header page-section__header--slider page-section__header--featured-products-slider'>
            {%- if section.settings.subtitle != blank -%}
                <span class="subtitle subtitle--blue">{{ section.settings.subtitle | escape }}</span>
            {%- endif -%}
            <h2 class="page-section__title page-section__title--featured-products-slider">{{ section.settings.title | escape }}</h2>
        </div>

        <div class="swiper swiper--default slider--Featured Products carousel--featured-products-slider">
            <!-- If we need navigation buttons -->
            <div class="swiper-arrow swiper-button-prev" tabindex="-1">
                <svg class='icon icon__arrow--left'><use xlink:href='#icon-swiper-previous'></use></svg>
                <span class="sr-only">Previous</span>
            </div>
            <div class="swiper-arrow swiper-button-next" tabindex="-1">
                <svg class='icon icon__arrow--right'><use xlink:href='#icon-swiper-next'></use></svg> <span class="sr-only">Next</span>
            </div>
            <ul class="swiper-wrapper">
                {% for block in section.blocks %}
                    {%- assign product = all_products[block.settings.product] -%}
                    {%- assign current_variant = product.selected_or_first_available_variant -%}
                    {%- assign featured_image = current_variant.featured_image | default: product.featured_image -%}

                    {% if product == empty %}
                      {%- assign section_onboarding = true -%}
                      {%- assign onboarding_title = 'homepage.onboarding.product_title' | t -%}
                    {% endif %}

                    <li class="swiper-slide">
                        <section class="content-panel content-panel--default content-panel--split align-right">
                            <div class="content-panel__container">
                                <div class="content-panel__meta">
                                    <div class='product__image-wrapper'>
                                        {% render "product-tags", product: product %}
                                        <a href="{{ product.url }}">
                                            {% render 'responsive-image' with
                                                  image: product.featured_image,
                                                  image_class: "background-image"
                                            %}
                                        </a>
                                    </div>
                                </div>

                                <div class="content-panel__content ">
                                    <div class='content-panel__content-wrapper'>                                       
                                        <a href="{{ product.url }}" class="featured-product__title-link">
                                            <h2 class="copy-block__title copy-block__title--featured-product h3">{{ product.title | default: onboarding_title }}</h2>
                                        </a>

                                        <div class="rte copy-block__text copy-block__featured-product-description">
                                            {{ product.description }}
                                        </div>

                                        <div class="price__wrapper">
                                            <div class="product__price">
                                                {% if product.compare_at_price_max > product.price %}
                                                    <span class="visually-hidden">{{ 'products.product.regular_price' | t }}</span>
                                                    <s class="price__sale">
                                                        {% if current_variant.compare_at_price > current_variant.price %}
                                                            {{ current_variant.compare_at_price | money }}
                                                        {% endif %}
                                                    </s>
                                                {% endif %}

                                                <span class="price__original {% if current_variant.compare_at_price > current_variant.price %}price__original--sale{% endif %}">
                                                    {{ current_variant.price | money }}
                                                </span>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </section>
                    </li>
                {% endfor %}
            </ul>

            <!-- If we need pagination -->
            <div class="swiper-pagination"></div>
        </div>
    </section>
</div>

{% schema %}
{
    "name": "Featured Products Slider",
    "class": "page-section page-section--full-bleed page-section--featured-products-slider",
    "settings": [
        {
            "type": "text",
            "id": "subtitle",
            "label": "Subtitle"
        },
        {
            "type": "text",
            "id": "title",
            "label": "Heading"
        }
    ],
    "blocks": [
        {
            "type": "slide",
            "name": "Product",
            "settings": [
                {
                    "type": "product",
                    "id": "product",
                    "label": "Product"
                }
            ]
        }
    ],
    "presets": [
        {
            "name": "Featured Products Slider",
            "category": "Sliders"
        }
    ]
}
{% endschema %}
