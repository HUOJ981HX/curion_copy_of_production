!function(e){e.referFriend=function(t){e.referFriend.settings={};var r={isNewToReferral:!1};r=e.extend(e.referFriend.settings,r,t),e.dispatchEvent("Flits:referFriend:Loaded",{settings:r});var i=new flits_tingle.modal({footer:!1,stickyFooter:!1,getContent:!0,closeMethods:["button"],closeLabel:"Close",cssClass:["flits-tingle-modal-popup-container"],beforeClose:function(){return!0}});if(!(e.isNull(e.getURLParameter("flits_refer_code"))&&e.isNull(e.getCookie("flits-referral-code")))&&-1==e.customer_id&&(e.referFriend.settings.isNewToReferral=!0),e.referFriend.settings.isNewToReferral){let t=null,r="";if(e.isNull(e.getURLParameter("flits_refer_code"))||(t=atob(e.getURLParameter("flits_refer_code")),e.setCookie("flits-referral-code",t,1)),e.isNull(e.getURLParameter("flits_inviter_name"))||(r=atob(e.getURLParameter("flits_inviter_name")),e.setCookie("flits-inviter-name",r,1)),e.isNull(e.getCookie("flits-referral-code"))||(t=e.getCookie("flits-referral-code")),e.isNull(e.getCookie("flits-inviter-name"))||(r=e.getCookie("flits-inviter-name")),!!e.isNull(e.getCookie("flits-referral-popup-closed"))){let t=e.t("Flits.locals.refer_friend_page.popup_message","You were referred by {{ inviter_name }}. Please help us in giving you credit by signing up here.").replace("{{ inviter_name }}","<strong>"+r+"</strong>");e.setCookie("flits-referral-popup-closed","1",1);let o=e("#flits-referral-modal-content").clone();e(o).find(".flits-tingle-modal-popup-text").html(t),i.setContent(e(o).html()),i.open(),e.dispatchEvent("Flits:referFriend:ModalOpen")}let l=e(".flits-social-login-btn");for(var o=0;o<l.length;o++)l[o].href+="&flits_refer_code="+t;let n=e('form[method="post"][action="/account"]');if(n){let r=e("<input/>");r.attr("type","hidden"),r.attr("name","customer[note][flits_referral_code]"),r.attr("value",t),e(n).find('[name="customer[note][flits_referral_code]"]').length?e(n).find('[name="customer[note][flits_referral_code]"]').val(t):e(n).append(r)}window.history.replaceState({},document.title,location.protocol+"//"+location.host+location.pathname)}-1!=e.customer_id&&e.setCookie("flits-referral-code","",-1)},e.referFriend()}(Flits);